<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Travel Mate - Place Community</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
  --primary:#22c55e;
  --primary-dark:#16a34a;
  --light:#f0fdf4;
  --white:#ffffff;
  --text:#1f2937;
}

body{
  font-family:'Poppins',sans-serif;
  background:var(--light);
  margin:0;
  color:var(--text);
}

/* CONTAINER */
.container{
  max-width:1000px;
  margin:40px auto;
  padding:20px;
}

/* PLACE HEADER */
.place-header{
  background:white;
  border-radius:25px;
  padding:25px;
  box-shadow:0 10px 30px rgba(34,197,94,0.15);
}

.place-title{
  font-size:28px;
  font-weight:600;
}

.place-desc{
  margin-top:10px;
  color:#555;
}

/* IMAGE GALLERY */
.gallery{
  display:block;
  gap:10px;
  margin-top:20px;
}

.gallery img{
  width:100%;
  height:200px;
  object-fit:cover;
  border-radius:20px;
}

/* Gallery layout tweaks */
.main-image-wrap { grid-column: 1 / -1; }
#mainImage { width: 100%; height: 420px; object-fit: cover; border-radius: 18px; }
.thumb-row { display:flex; gap:10px; flex-wrap:nowrap; overflow-x:auto; padding:6px 2px; }
.thumb { width:120px; height:120px; object-fit:cover; border-radius:8px; cursor:pointer; border:2px solid transparent; flex:0 0 auto; }
.thumb:hover { border-color:var(--primary); transform:translateY(-3px); }
.thumb.hidden { display:none; }

/* Show more button styles */
.show-more { border:2px solid var(--primary); color:var(--primary); background:transparent; border-radius:10px; padding:8px 14px; transition:all .18s ease; }
.show-more:hover { background:var(--primary); color:var(--white); transform:translateY(-3px); }

/* Lightbox modal */
.img-modal { position:fixed; inset:0; background:rgba(0,0,0,.85); display:flex; align-items:center; justify-content:center; z-index:9999; visibility:hidden; opacity:0; transition:opacity .18s ease; }
.img-modal.open { visibility:visible; opacity:1; }
.img-modal img { max-width:92%; max-height:92%; border-radius:10px; }
.img-modal .close { position:absolute; top:20px; right:24px; color:#fff; font-size:22px; cursor:pointer; }

/* TABS */
.tabs{
  margin-top:40px;
  display:flex;
  gap:20px;
  border-bottom:2px solid #ddd;
}

.tab-btn{
  padding:10px 20px;
  cursor:pointer;
  font-weight:500;
  border-bottom:3px solid transparent;
}

.tab-btn.active{
  border-color:var(--primary);
  color:var(--primary);
}

/* SECTION */
.section{
  display:none;
  margin-top:30px;
}

.section.active{
  display:block;
}

/* REVIEW CARD */
.review-card{
  background:white;
  padding:20px;
  border-radius:20px;
  margin-bottom:20px;
  box-shadow:0 5px 20px rgba(0,0,0,0.05);
}

.review-user{
  font-weight:600;
}

.review-rating i{
  color:#ddd;
}

.review-rating i.active{
  color:var(--primary);
}

.review-img{
  width:100%;
  margin-top:10px;
  border-radius:15px;
}

.review-actions{
  margin-top:10px;
  display:flex;
  gap:15px;
}

.like-btn{
  cursor:pointer;
  color:#888;
}

.like-btn.liked{
  color:red;
}

/* ADD REVIEW */
.add-review{
  background:white;
  padding:20px;
  border-radius:20px;
  margin-bottom:30px;
}

.add-review input,
.add-review textarea{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:15px;
  border:1px solid #ddd;
}

.add-review button{
  background:var(--primary);
  color:white;
  border:none;
  padding:10px 20px;
  border-radius:50px;
  cursor:pointer;
}

.add-review button:hover{
  background:var(--primary-dark);
}

/* GUIDE CARD */
.guide-card{
  background:white;
  padding:20px;
  border-radius:20px;
  margin-bottom:20px;
  display:flex;
  align-items:center;
  gap:15px;
  box-shadow:0 5px 20px rgba(0,0,0,0.05);
}

.guide-card img{
  width:60px;
  height:60px;
  border-radius:50%;
  object-fit:cover;
}

.guide-name{
  font-weight:600;
}

.guide-btn{
  margin-left:auto;
  background:var(--primary);
  color:white;
  padding:8px 15px;
  border-radius:50px;
  cursor:pointer;
}

.guide-btn:hover{
  background:var(--primary-dark);
}
</style>
</head>

<body>

<div class="container">

<!-- PLACE HEADER -->
<div class="place-header">
  <div class="place-title">Bali, Indonesia</div>
  <div class="place-desc">
    Famous for beaches, temples, waterfalls and vibrant nightlife.
  </div>

  <div class="gallery">
      <div class="main-image-wrap">
        <img id="mainImage" src="https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=1200&q=90" alt="Main">
      </div>
      <div id="thumbRow" class="thumb-row">
        <img class="thumb" src="https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=600&q=80">
        <img class="thumb" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600&q=80">
        <img class="thumb" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600&q=80">
      </div>
      <div style="width:100%;text-align:center;margin-top:10px;">
        <button id="showMoreBtn" class="show-more">Show more</button>
      </div>
  </div>
</div>

<!-- TABS -->
<div class="tabs">
  <div class="tab-btn active" data-tab="reviews">Reviews</div>
  <div class="tab-btn" data-tab="guides">Guide Section</div>
</div>

<!-- REVIEWS SECTION -->
<div class="section active" id="reviews">

  <div id="reviewContainer"></div>

  <!-- ADD REVIEW (placed after reviews) -->
  <div class="add-review" id="addReviewForm">
    <h3>Add Review</h3>
    <input type="text" id="reviewUser" placeholder="Your Name">
    <textarea id="reviewText" placeholder="Write your experience..."></textarea>
    <input type="file" id="reviewImage">
    <button id="submitReview">Submit</button>
  </div>

</div>

<!-- GUIDES SECTION -->
<div class="section" id="guides">

  <div class="guide-card">
    <img src="https://randomuser.me/api/portraits/men/32.jpg">
    <div>
      <div class="guide-name">Ramesh Kumar</div>
      <div>5 Years Experience | English & Hindi</div>
    </div>
    <div class="guide-btn">Contact</div>
  </div>

  <div class="guide-card">
    <img src="https://randomuser.me/api/portraits/women/44.jpg">
    <div>
      <div class="guide-name">Anita Sharma</div>
      <div>3 Years Experience | English</div>
    </div>
    <div class="guide-btn">Contact</div>
  </div>

</div>

<!-- Image lightbox modal -->
<div id="imageModal" class="img-modal">
  <div class="close">&times;</div>
  <img src="" alt="View">
</div>

<!-- Message modal -->
<div id="messageModal" class="img-modal">
  <div class="close">&times;</div>
  <div style="background:#fff;padding:18px;border-radius:10px;max-width:760px;width:90%;">
    <h3 class="modal-title">Message Reviewer</h3>
    <textarea id="messageText" style="width:100%;height:120px;margin-top:10px;border-radius:8px;border:1px solid #ddd;padding:8px;"></textarea>
    <div style="text-align:right;margin-top:10px;">
      <button id="sendMessageBtn" class="btn btn-primary">Send</button>
    </div>
  </div>
</div>

</div>

<script>

// TAB SWITCH
$(".tab-btn").click(function(){
  $(".tab-btn").removeClass("active");
  $(this).addClass("active");

  $(".section").removeClass("active");
  $("#" + $(this).data("tab")).addClass("active");
});

// ADD REVIEW
$("#submitReview").click(function(){

  let name=$("#reviewUser").val();
  let text=$("#reviewText").val();
  let file=$("#reviewImage")[0].files[0];

  if(name==="" || text===""){
    alert("Fill all fields");
    return;
  }

  let reader=new FileReader();
  reader.onload=function(e){

    let reviewHTML=`
      <div class="review-card">
        <div class="review-user">${name}</div>
        <div class="review-text">${text}</div>
        ${file ? `<img src="${e.target.result}" class="review-img">` : ""}
        <div class="review-actions">
          <div class="like-btn"><i class="fa fa-heart"></i> <span class="count">0</span></div>
          ${name ? `<button class="contact-reviewer btn btn-outline" data-reviewer="${name}" style="margin-left:10px;">Message</button>` : ''}
        </div>
      </div>
    `;

    $("#reviewContainer").prepend(reviewHTML);
    // If the review included an image, add it as a thumbnail to the gallery
    if(file && e.target && e.target.result){
      const t = $('<img>').addClass('thumb').attr('src', e.target.result);
      $('#thumbRow').append(t);
      // hide extras if over limit
      $('#thumbRow img').slice(5).addClass('hidden');
      $('#showMoreBtn').text('Show more');
    }
  }

  if(file){
    reader.readAsDataURL(file);
  } else {
    reader.onload({target:{result:""}});
  }

  $("#reviewUser").val("");
  $("#reviewText").val("");
  $("#reviewImage").val("");

});

// LIKE REVIEW
$(document).on("click",".like-btn",function(){

  let countElement=$(this).find(".count");
  let count=parseInt(countElement.text());

  if($(this).hasClass("liked")){
    count--;
    $(this).removeClass("liked");
  } else {
    count++;
    $(this).addClass("liked");
  }

  countElement.text(count);
});

// Thumbnail click -> set main image or open modal
$(document).on('click', '.thumb', function(){
  const src = $(this).attr('src');
  $('#mainImage').attr('src', src);
});

// Click main image to open modal
if ($('#mainImage').length) {
  $(document).on('click', '#mainImage', function(){
    $('#imageModal img').attr('src', $(this).attr('src'));
    $('#imageModal').addClass('open');
  });
}

// Image modal close
$(document).on('click', '#imageModal .close, #imageModal', function(e){
  if (e.target !== this && !$(e.target).is('.close')) return;
  $('#imageModal').removeClass('open');
});

// Initialize thumbnails: hide extras beyond 5
$('#thumbRow img').slice(5).addClass('hidden');

// Show more thumbnails (toggle hidden extras)
$('#showMoreBtn').click(function(){
  const hidden = $('.thumb.hidden');
  if(hidden.length){ hidden.removeClass('hidden'); $(this).text('Show less'); }
  else { $('#thumbRow img').slice(5).addClass('hidden'); $(this).text('Show more'); }
});

// Show more thumbnails (toggle hidden extras)
$('#showMoreBtn').click(function(){
  const hidden = $('.thumb.hidden');
  if(hidden.length){ hidden.removeClass('hidden'); $(this).text('Show less'); }
  else { $('#thumbRow img').slice(5).addClass('hidden'); $(this).text('Show more'); }
});

// Contact reviewer - open message modal
$(document).on('click', '.contact-reviewer', function(){
  const reviewer = $(this).data('reviewer') || 'Reviewer';
  $('#messageModal .modal-title').text('Message ' + reviewer);
  $('#messageModal').addClass('open');
});

// Send message (simulate)
$('#sendMessageBtn').click(function(){
  const msg = $('#messageText').val().trim();
  if(!msg) return alert('Enter a message');
  alert('Message sent to reviewer: ' + msg);
  $('#messageText').val('');
  $('#messageModal').removeClass('open');
});

</script>

</body>
</html>